/*
  Arduino Wireless Communication Tutorial
        Example 1 - Receiver Code

  by Dejan Nedelkovski, www.HowToMechatronics.com

  Library: TMRh20/RF24, https://github.com/tmrh20/RF24/
*/

#include <SPI.h>
#include <nRF24L01.h>
#include <RF24.h>
RF24 radio(7, 8); // CE, CSN
const byte address1[6] = "10000";
const byte address2[6] = "20000";

byte pip;
byte pload_width_now;

void setup() {
  Serial.begin(9600);
  Serial.println("Here is the HUB...");
  
  radio.begin();
  radio.setPALevel(RF24_PA_LOW);  
  radio.openReadingPipe(1, address1);
  radio.openReadingPipe(2, address2);  
  radio.startListening();
  radio.printDetails();
}
void loop() {
  if ( radio.available(&pip) ) {
    Serial.print("pipe ");
    Serial.println(pip);
        
    if (pip == 1) {
      float temperature[] = {0.00, 0.00};
      radio.read(&temperature, sizeof(temperature));
      Serial.print("temp ");
      Serial.println(temperature[0]);
      Serial.print("humidity ");
      Serial.println(temperature[1]);
    } else if (pip == 2) {
      int motion = 0;
      radio.read(&motion, sizeof(motion));
      Serial.print("motion ");
      Serial.println(motion);
    }
  }  
}
